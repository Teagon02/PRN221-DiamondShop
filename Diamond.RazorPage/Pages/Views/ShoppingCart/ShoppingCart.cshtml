@page
@model Diamond.RazorPage.Pages.Views.ShoppingCart.ShoppingCartModel
@{
    ViewData["Title"] = "Shopping Cart";
}
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="display-4">Your Shopping Cart</h1>
        <p class="lead text-muted">Review and edit items you are ready to purchase.</p>
    </div>
</section>

<div class="py-3 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12">
                @if (Model.CartItems.Count == 0)
                {
                    <p class="text-center lead">Your cart is empty.</p>
                }
                else
                {
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.CartItems)
                            {
                                <tr>
                                    <td>@item.Name</td>
                                    <td>
                                        <input type="number" value="@item.Quantity" min="1" class="form-control" style="width: 80px;">
                                    </td>
                                    <td>@item.Price.ToString("C")</td>
                                    <td>@(item.Quantity * item.Price).ToString("C")</td>
                                    <td>
                                        <button class="btn btn-danger" asp-page-handler="Remove" asp-route-id="@item.Id">Remove</button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                    <div class="text-right">
                        <h4>Total: @Model.CartItems.Sum(i => i.Quantity * i.Price).ToString("C")</h4>
                        <button class="btn btn-primary" asp-page="/Checkout">Proceed to Checkout</button>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
